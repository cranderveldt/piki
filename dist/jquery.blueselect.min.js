(function(l){l.fn.blueSelect=function(s){var t=l.extend({icon:"&varr;"},s);return this.each(function(){var s=l(this),e='<div class="blsl-container"><div class="blsl-select">',i=s.find("option:selected").text();""===i&&(i=s.find("option:first").text()),e=e+'<div class="blsl-title" data-blsl-default="'+i+'">'+i+"</div>"+'<span class="blsl-icon">'+t.icon+"</span>"+"</div>"+'<div class="blsl-search">'+'<input class="blsl-search-field" type="text" placeholder="Search for options" />'+"</div>"+'<div class="blsl-options">'+"<ul>",s.find('option[disabled!="disabled"]').each(function(){var s=l(this),t="";l.each(this.attributes,function(l,s){var e=s.name,i=s.value;t=t+" data-blsl-"+e+'="'+i+'"'}),e=e+'<li class="blsl-match"'+t+">"+s.text()+"</li>"}),e=e+"</ul>"+"</div>"+"</div>",s.hide().after(e);var a=s.next(),n=function(s){var t=s.find(".blsl-options ul li.blsl-match:first").data("blsl-selected","selected").siblings().data("blsl-selected","").addClass("blsl-match").end();t.length>0?(s.find(".blsl-title").text(t.text()),s.find('option[value="'+t.data("blsl-value")+'"]').prop("selected","selected")):s.find(".blsl-title").text(s.find(".blsl-title").data("blsl-default")),l("body").off(),s.find(".blsl-select").show().siblings().hide(),s.find(".blsl-search-field").val("")};l("html").on("keypress",".blsl-search-field",function(l){13===l.keyCode&&l.preventDefault()}),l("html").on("keyup",".blsl-search-field",function(s){var t=l(this).parent().parent(),e=t.find(".blsl-options ul li");13===s.keyCode&&n(t);var i=l(this).val().toLowerCase();e.each(function(){var s=l(this).text().toLowerCase();-1===s.indexOf(i)?l(this).removeClass("blsl-match"):l(this).addClass("blsl-match")})}),l("html").on("click",".blsl-match",function(){l(this).siblings().removeClass("blsl-match"),n(l(this).parent().parent().parent())}),l("html").on("click",".blsl-select",function(){l(this).hide().siblings().show().end().parent().find(".blsl-search-field").focus(),l("body").on("click",function(s){var t=!1;l(s.target).parents().each(function(){l(this).hasClass("blsl-container")&&(t=!0)}),t||(l("body").off(),a.find(".blsl-select").show().siblings().hide())})})})}})(jQuery);