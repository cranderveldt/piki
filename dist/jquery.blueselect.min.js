(function(l){l.fn.blueSelect=function(s){return this.each(function(){var t=l.extend({icon:"&varr;"},s),e=l(this),i='<div class="blsl-container"><div class="blsl-select">',a=e.find("option:selected").text();""===a&&(a=e.find("option:first").text()),i=i+'<div class="blsl-title" data-blsl-default="'+a+'">'+a+"</div>"+'<span class="blsl-icon">'+t.icon+"</span>"+"</div>"+'<div class="blsl-search">'+'<input class="blsl-search-field" type="text" placeholder="Search for options" />'+"</div>"+'<div class="blsl-options">'+"<ul>",e.find('option[disabled!="disabled"]').each(function(){var s=l(this),t="";l.each(this.attributes,function(l,s){var e=s.name,i=s.value;t=t+" data-blsl-"+e+'="'+i+'"'}),i=i+'<li class="blsl-match"'+t+">"+s.text()+"</li>"}),i=i+"</ul>"+"</div>"+"</div>",e.hide().after(i);var n=e.next(),c=function(){var s=n.find(".blsl-options ul li.blsl-match:first").data("blsl-selected","selected").siblings().data("blsl-selected","").addClass("blsl-match").end();s.length>0?(n.find(".blsl-title").text(s.text()),e.find('option[value="'+s.data("blsl-value")+'"]').prop("selected","selected")):n.find(".blsl-title").text(n.find(".blsl-title").data("blsl-default")),l("body").off(),n.find(".blsl-select").show().siblings().hide(),n.find(".blsl-search-field").val("")};l("html").on("keypress",".blsl-search-field",function(l){13===l.keyCode&&l.preventDefault()}),l("html").on("keyup",".blsl-search-field",function(s){var t=l(this).parent().parent(),e=t.find(".blsl-options ul li");13===s.keyCode&&c();var i=l(this).val().toLowerCase();e.each(function(){var s=l(this).text().toLowerCase();-1===s.indexOf(i)?l(this).removeClass("blsl-match"):l(this).addClass("blsl-match")})}),l("html").on("click",".blsl-match",function(){l(this).siblings().removeClass("blsl-match"),c()}),l("html").on("click",".blsl-select",function(){l(this).hide().siblings().show().end().parent().find(".blsl-search-field").focus(),l("body").on("click",function(s){var t=!1;l(s.target).parents().each(function(){l(this).hasClass("blsl-container")&&(t=!0)}),t||(l("body").off(),n.find(".blsl-select").show().siblings().hide())})})})}})(jQuery);